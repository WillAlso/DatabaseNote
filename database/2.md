# Chaper 2 Introduction to Structured Query Language
[TOC]
## 1.Cape Codd Outdoor Sports
*The source of data.*

| Table | Column | DataType |
|--------|--------|
|RRTAIL_ORDER| OrderNumber | Integer |
| | StoreNumber | Integer |
| | StoreZip | Character(9) |
| | OrderMonth | Character(12) |
| | OrderYear | Integer |
| | OrderTotal | Currency |
| ORDER_ITEM | OrderNumber | Integer |
| | SKU | Integer |
| | Quantity | Integer |
| | Price | Currency |
| | ExtendedPrice | Currency |
| SKU_DATA | SKU | Integer |
| | SKU_Description | Character(35) |
| | Department | Character(30) |
| | Buyer | Character(30) |

## 2.SQL Background
1. Create
	SQL was developed by the IBM Corporation in the late 1970s. It was endorsed as a national standard by the American National Standards Institute (ANSI) in 1986.
2. Three categories
	+ Data definition language (DDL) statements, which are used for creating tables, relationships, and other structures
	+ Data manipulation language (DML) statements, which are used for querying, inserting, modifying, and deleting data

## 3.The SQL SELECT/FROM/WHERE Framework
1. Framework
	+ **The SQL SELECT** clause specifies which columns are to be listed in the query results
	+ **The SQL FROM** clause specifies which tables are to be used in the query
	+ **The SQL WHERE** clause specifies which rows are to be listed in the query results
2. Reading Specified Columns from a Single Table
	1. Sample examples
	```sql
    SELECT Department,Buyer FROM SKU_DATA;
    ```
    > Notice that SQL statements terminate with a semicolon (;) character. Allow you to omit the semicolon

	2. Using **DISTINCT** Eliminate duplicates
	```sql
    SELECT DISTINCT Department,Buyer FROM SKU_DATA;
    ```
    > The reason that SQL does not automatically eliminate duplicate rows is that it can be very time consuming to do so.

	3. View all of the columns
	```sql
    SELECT * FROM SKU_DATA;
    ```

3. Reading Specified Rows from a Single Table
	**WHERE**
	```sql
    SELECT * FROM SKU_DATA WHERE Department='Water Sports';
    ```
    > If the column contains text or date data, the comparison 
values must be enclosed in single quotation marks ( '{text or date data}' ). If the column contains numeric data, however, the comparison values need not be in quotes.

4. Reading Specified Columns and Rows from a Single Table
	```sql
    SELECT SKU_Description,Department FROM	SKU_DATA WHERE Department='Climbing';
    ```

## 4.Submitting SQL Statements to the DBMS
1. Using SQL in Microsoft Access 2007
	+ “Does Not Work with Microsoft Access ANSI-89 SQL”
	+ Access Options
	+ Object Designers
	+ SQL Server Compatible Syntax
2. Using SQL in Microsoft SQL Server 2008
3. Using SQL in Oracle Database 11g
4. Using SQL in Oracle MySQL 5.5

## 5.SQL Enhancements for Querying a Single Table
1. Sorting the SQL Query Results
	```sql
    SELECT * FROM ORDER_ITEM ORDER BY OrderNumber;
    ```
    Two columns
    ```sql
    SELECT * FROM ORDER_ITEM ORDER BY OrderNumber,Price;
    ```
    > By default, rows are sorted in ascending order.
    Descending order
    ```sql
    SELECT * FROM ORDER_ITEM ORDER BY Price DESC, OrderNumber ASC;
    ```

2. SQL WHERE Clause Options
	1. Compound WHERE Clauses
	SQL **AND, OR, IN, NOT IN**
    ```sql
    SELECT * FROM SKU_DATA WHERE Department='Water Sports' AND Buyer='Nancy Meyers';
    SELECT * FROM SKU_DATA WHERE Department='Camping' OR Department='Climbing';
    SELECT * FROM SKU_DATA WHERE Buyer IN ('Nancy Meyers','Cindy Lo','Jerry Martin');
    SELECT * FROM SKU_DATA WHERE Buyer NOT IN ('Nancy Meyers','Cindy Lo', 'Jerry Martin');
    ```
	2. Ranges in SQL WHERE Clauses
	SQL **BETWEEN**
    ```sql
    SELECT * FROM ORDER_ITEM WHERE ExtendedPrice BETWEEN 100 AND 200;
    SELECT * FROM ORDER_ITEM WHERE ExtendedPrice >= 100 AND ExtendedPrice <= 200;
    ```
	3. Wildcards in SQL WHERE Clauses
	SQL **LIKE**
    ```sql
    SELECT * FROM SKU_DATA WHERE Buyer LIKE 'Pete%';
    SELECT * FROM SKU_DATA WHERE SKU LIKE '%2__';
    ```

	4. Combining the SQL WHERE Clause and the SQL ORDER BY Clause
	```sql
	SELECT * FROM ORDER_ITEM WHERE ExtendedPrice BETWEEN 100 AND 200 ORDER BY OrderNumber DESC;
    ```

## 6.Performing Calculations in SQL Queries
1. Using SQL Built-in Functions
	**SUM, AVG, MIN, MAX, COUNT**
    ```sql
    SELECT SUM(OrderTotal) AS OrderSum FROM RETAIL_ORDER;
    SELECT SUM(ExtendedPrice) AS  OrderItemSum,
		AVG(ExtendedPrice)  AS  OrderItemAvg,
		MIN(ExtendedPrice)  AS  OrderItemMin,
		MAX(ExtendedPrice)  AS  OrderItemMax
	FROM ORDER_ITEM;
    SELECT COUNT(*) AS NumberOfRows FROM ORDER_ITEM;
    SELECT COUNT(Department) AS DeptCount FROM SKU_DATA;
    SELECT COUNT(DISTINCT Department) AS DeptCount FROM SKU_DATA;
    ```
    > 1. You should be aware of two limitations to SQL built-in functions.
    > ```sql
    #error
    SELECT Department, COUNT(*) FROM SKU_DATA;
    ```
    > 2. The second problem with the SQL built-in functions that you should understand is that you cannot use them in an SQL WHERE clause
    ```sql
    SELECT * FROM RETAIL_ORDER WHERE OrderTotal > AVG(OrderTotal);
    ```

2. SQL Expressions in SQL SELECT Statements


## 7.Grouping in SQL SELECT Statements
## 8.Looking for Patterns in NASDAQ Trading
## 9.Querying Two or More Tables with SQL